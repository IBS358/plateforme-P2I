<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fili√®res Industrielles | Plateforme Industrielle Ivoirienne (P2I)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== STYLES DE BASE P2I ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #0d1b2a 0%, #1b263b 100%);
            color: white;
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            padding-top: 100px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ===== HEADER & NAVIGATION P2I ===== */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(13, 27, 42, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(76, 201, 240, 0.1);
            padding: 15px 0;
        }
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo-icon {
            width: 50px;
            height: 50px;
            position: relative;
        }
        .gear {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid #4cc9f0;
        }
        .gear-large { animation: rotate 20s linear infinite; }
        .gear-medium {
            width: 70%; height: 70%; top: 15%; left: 15%;
            animation: rotate 15s linear infinite reverse;
        }
        .gear-small {
            width: 40%; height: 40%; top: 30%; left: 30%;
            animation: rotate 10s linear infinite;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .logo-text {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(to right, #4cc9f0, #f72585);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        nav ul {
            display: flex;
            gap: 40px;
            list-style: none;
        }
        nav a {
            color: #b8c1ec;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s;
            position: relative;
            padding: 5px 0;
        }
        nav a:hover { color: #4cc9f0; }
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(to right, #4cc9f0, #f72585);
            transition: width 0.3s ease;
        }
        nav a:hover::after { width: 100%; }
        nav a.active {
            color: #4cc9f0;
            font-weight: 600;
        }
        nav a.active::after {
            width: 100%;
        }
 /* NOUVEAU : Style du bouton Connexion */
        .btn-login-nav {
            background: rgba(76, 201, 240, 0.1);
            border: 1px solid #4cc9f0;
            color: #4cc9f0;
            padding: 8px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 10px;
        }
        .btn-login-nav:hover {
            background: #4cc9f0;
            color: #0d1b2a;
            box-shadow: 0 0 15px rgba(76, 201, 240, 0.4);
        }

        /* ===== HERO SECTION FILI√àRES ===== */
        .hero {
            min-height: 40vh;
            display: flex;
            align-items: center;
            padding: 60px 0 40px;
            position: relative;
            text-align: center;
        }
        .hero-content h1 {
            font-size: 3.5rem;
            background: linear-gradient(to right, #4cc9f0, #f72585);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 20px;
        }
        .hero-subtitle {
            font-size: 1.3rem;
            color: #b8c1ec;
            max-width: 800px;
            margin: 0 auto 40px;
        }

        /* ===== √âTAPES DE S√âLECTION ===== */
        .step-indicator {
            display: flex;
            justify-content: center;
            margin: 40px 0;
            gap: 20px;
        }
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #b8c1ec;
            transition: all 0.3s;
        }
        .step:hover {
            transform: translateY(-5px);
        }
        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 10px;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .step.active .step-circle {
            background: #4361ee;
            color: white;
            box-shadow: 0 0 20px rgba(67, 97, 238, 0.7);
            border-color: #4cc9f0;
        }
        .step.completed .step-circle {
            background: #28a745;
            color: white;
            box-shadow: 0 0 20px rgba(40, 167, 69, 0.5);
        }

        /* ===== SECTIONS DE S√âLECTION ===== */
        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            display: none;
            animation: fadeIn 0.5s ease;
            border: 1px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, transparent, #4cc9f0, transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .section:hover::before {
            opacity: 1;
        }
        .section:hover {
            border-color: rgba(76, 201, 240, 0.3);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            transform: translateY(-5px);
        }
        .section.active {
            display: block;
            border-color: rgba(76, 201, 240, 0.2);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(to right, #4cc9f0, #f72585);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .section-subtitle {
            font-size: 1.2rem;
            text-align: center;
            color: #b8c1ec;
            margin-bottom: 40px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        /* ===== FILI√àRES GRID ===== */
        .filiere-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        .filiere-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        .filiere-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(76, 201, 240, 0.1), transparent);
            transition: left 0.6s;
        }
        .filiere-card:hover::before {
            left: 100%;
        }
        .filiere-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: rgba(76, 201, 240, 0.5);
            box-shadow: 0 15px 30px rgba(76, 201, 240, 0.2);
        }
        .filiere-card.selected {
            border-color: #4361ee;
            background: rgba(67, 97, 238, 0.15);
            box-shadow: 0 15px 30px rgba(67, 97, 238, 0.3);
            animation: selectedGlow 2s infinite alternate;
        }
        @keyframes selectedGlow {
            from { box-shadow: 0 10px 20px rgba(67, 97, 238, 0.3); }
            to { box-shadow: 0 15px 30px rgba(67, 97, 238, 0.5); }
        }
        .filiere-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            text-align: center;
        }
        .filiere-title {
            color: white;
            font-size: 1.5rem;
            margin-bottom: 10px;
            text-align: center;
        }
        .filiere-desc {
            color: #b8c1ec;
            text-align: center;
            margin-bottom: 15px;
        }
        .filiere-count {
            color: #4cc9f0;
            font-size: 0.9rem;
            text-align: center;
            margin-top: 15px;
        }

        /* ===== UNIT√âS DE PRODUCTION ===== */
        .unite-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .unite-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        .unite-card:hover {
            border-color: rgba(76, 201, 240, 0.7);
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 10px 25px rgba(76, 201, 240, 0.3);
        }
        .unite-card.selected {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.15);
            box-shadow: 0 10px 25px rgba(40, 167, 69, 0.3);
            animation: selectedPulse 1.5s infinite alternate;
        }
        @keyframes selectedPulse {
            from { background: rgba(40, 167, 69, 0.15); }
            to { background: rgba(40, 167, 69, 0.25); }
        }
        .capex-badge {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 10px;
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        .unite-name {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 8px;
        }
        .unite-desc {
            color: #b8c1ec;
            font-size: 0.9rem;
        }

        /* ===== LOCALISATION C√îTE D'IVOIRE ===== */
        .location-container {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            border: 1px solid transparent;
            transition: all 0.3s ease;
        }
        .location-container:hover {
            border-color: rgba(76, 201, 240, 0.3);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        .location-title {
            color: #4cc9f0;
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        .location-title i {
            margin-right: 10px;
            text-shadow: 0 0 10px rgba(76, 201, 240, 0.5);
        }
        .location-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .location-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        .location-card:hover {
            background: rgba(76, 201, 240, 0.25);
            transform: translateY(-5px) scale(1.05);
            border-color: rgba(76, 201, 240, 0.7);
            box-shadow: 0 10px 20px rgba(76, 201, 240, 0.3);
        }
        .location-card.selected {
            background: rgba(67, 97, 238, 0.35);
            border-color: #4361ee;
            color: #4cc9f0;
            box-shadow: 0 10px 25px rgba(67, 97, 238, 0.4);
            animation: cardGlow 2s infinite alternate;
        }
        @keyframes cardGlow {
            from { box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3); }
            to { box-shadow: 0 10px 25px rgba(67, 97, 238, 0.5); }
        }
        .location-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        .location-type {
            font-size: 0.8rem;
            color: #b8c1ec;
            background: rgba(255, 255, 255, 0.1);
            padding: 3px 8px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 5px;
        }
        .location-type.region {
            background: rgba(40, 167, 69, 0.25);
            color: #28a745;
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        .location-type.city {
            background: rgba(76, 201, 240, 0.25);
            color: #4cc9f0;
            border: 1px solid rgba(76, 201, 240, 0.3);
        }

        /* ===== FORMULAIRES INVESTISSEMENT ===== */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        .form-group {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid transparent;
            transition: all 0.3s ease;
        }
        .form-group:hover {
            border-color: rgba(76, 201, 240, 0.3);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transform: translateY(-3px);
        }
        .form-title {
            color: #4cc9f0;
            font-size: 1.3rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        .form-title i {
            margin-right: 10px;
            text-shadow: 0 0 10px rgba(76, 201, 240, 0.5);
        }

        .investment-input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: 1.1rem;
            margin-top: 15px;
            transition: all 0.3s;
        }
        .investment-input:focus {
            outline: none;
            border-color: #4cc9f0;
            box-shadow: 0 0 15px rgba(76, 201, 240, 0.3);
        }
        .investment-range {
            width: 100%;
            margin: 20px 0;
            -webkit-appearance: none;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            outline: none;
        }
        .investment-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 25px;
            height: 25px;
            background: #4361ee;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 0 15px rgba(67, 97, 238, 0.8);
            transition: all 0.3s;
        }
        .investment-range::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(67, 97, 238, 1);
        }

        /* ===== R√âCAPITULATIF ===== */
        .recap-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .recap-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .recap-card:hover {
            border-color: rgba(76, 201, 240, 0.3);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(76, 201, 240, 0.2);
        }
        .recap-label {
            color: #b8c1ec;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        .recap-value {
            color: white;
            font-size: 1.3rem;
            font-weight: 600;
        }
        .recap-capex {
            color: #28a745;
            text-shadow: 0 0 10px rgba(40, 167, 69, 0.3);
        }
        .recap-opex {
            color: #ff6b6b;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.3);
        }

        /* ===== BOUTONS ===== */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }
        .btn {
            padding: 18px 35px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 200px;
            position: relative;
            overflow: hidden;
        }
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        .btn:hover::before {
            left: 100%;
        }
        .btn-prev {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .btn-prev:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 255, 255, 0.1);
            border-color: rgba(76, 201, 240, 0.5);
        }
        .btn-next {
            background: linear-gradient(to right, #4361ee, #3a0ca3);
            color: white;
            border: 1px solid rgba(67, 97, 238, 0.5);
        }
        .btn-next:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(67, 97, 238, 0.4);
        }
        .btn-confirm {
            background: linear-gradient(to right, #28a745, #20c997);
            color: white;
            width: 100%;
            max-width: 400px;
            margin: 40px auto 0;
            display: block;
            min-width: 250px;
            border: 1px solid rgba(40, 167, 69, 0.5);
        }
        .btn-confirm:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(40, 167, 69, 0.4);
        }
        .btn-modify {
            background: linear-gradient(to right, #ff6b6b, #ee5a52);
            color: white;
            padding: 18px 35px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 250px;
            border: 1px solid rgba(255, 107, 107, 0.5);
        }
        .btn-modify:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(255, 107, 107, 0.4);
            background: linear-gradient(to right, #ff5252, #ff3838);
        }
        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        /* ===== FOOTER P2I ===== */
        footer {
            background: rgba(0, 0, 0, 0.3);
            padding: 60px 0 30px;
            border-top: 1px solid rgba(76, 201, 240, 0.1);
            margin-top: 80px;
        }
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        .footer-column h3 {
            font-size: 1.3rem;
            margin-bottom: 25px;
            background: linear-gradient(to right, #4cc9f0, #f72585);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .footer-links {
            list-style: none;
        }
        .footer-links li { margin-bottom: 12px; }
        .footer-links a {
            color: #b8c1ec;
            text-decoration: none;
            transition: all 0.3s;
        }
        .footer-links a:hover {
            color: #4cc9f0;
            padding-left: 5px;
        }
        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #b8c1ec;
            font-size: 0.9rem;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            body { padding-top: 140px; }
            .hero { padding: 40px 0; }
            .hero-content h1 { font-size: 2.5rem; }
            nav ul { flex-wrap: wrap; justify-content: center; gap: 15px; }
            .nav-container { flex-direction: column; gap: 20px; }
            .filiere-grid, .unite-list, .form-grid, .recap-grid, .location-grid {
                grid-template-columns: 1fr;
            }
            .step-indicator { flex-wrap: wrap; }
            .navigation-buttons { flex-direction: column; gap: 15px; }
            .btn, .btn-modify { width: 100%; min-width: unset; }
            .action-buttons { flex-direction: column; align-items: center; }
            .location-card { min-width: 150px; }
        }
    </style>
</head>
<body>
    <!-- Header avec Navigation P2I -->
    <header>
        <div class="container nav-container">
            <div class="logo">
                <div class="logo-icon">
                    <div class="gear gear-large"></div>
                    <div class="gear gear-medium"></div>
                    <div class="gear gear-small"></div>
                </div>
                <div class="logo-text">P2I</div>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="filieres.html" class="active">Fili√®res</a></li>
                    <li><a href="secteur-industriel.html">Secteur industriel</a></li>
                    <li><a href="reseau.html">R√©seautage</a></li>
                    <li><a href="apropos.html">√Ä propos</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="mon-espace-personnel.html" class="nav-auth-btn">
        <i class="fas fa-user-circle"></i> Mon Espace Personnel
    </a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- H√©ro Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Explorez les Fili√®res Industrielles</h1>
                <p class="hero-subtitle">
                    S√©lectionnez votre fili√®re, d√©couvrez les unit√©s de production adapt√©es au march√© ivoirien, 
                    choisissez votre localisation et d√©finissez votre investissement. En 5 √©tapes, construisez votre projet industriel.
                </p>
            </div>
        </div>
    </section>

    <!-- Indicateur d'√©tapes -->
    <div class="container">
        <div class="step-indicator">
            <div class="step active" id="step1">
                <div class="step-circle">1</div>
                <span>Fili√®re</span>
            </div>
            <div class="step" id="step2">
                <div class="step-circle">2</div>
                <span>Unit√©</span>
            </div>
            <div class="step" id="step3">
                <div class="step-circle">3</div>
                <span>Localisation</span>
            </div>
            <div class="step" id="step4">
                <div class="step-circle">4</div>
                <span>Investissement</span>
            </div>
            <div class="step" id="step5">
                <div class="step-circle">5</div>
                <span>R√©capitulatif</span>
            </div>
        </div>
    </div>

    <!-- √âtape 1 : S√©lection de la fili√®re -->
    <div class="container">
        <div class="section active" id="section1">
            <h2 class="section-title">S√©lectionnez une Fili√®re Industrielle</h2>
            <p class="section-subtitle">
                Choisissez parmi nos 12 fili√®res industrielles. Chaque fili√®re contient 8 unit√©s de production sp√©cifiques adapt√©es au march√© ivoirien.
            </p>
            <div class="filiere-grid" id="filiereGrid">
                <!-- G√©n√©r√© par JavaScript -->
            </div>
            <div class="navigation-buttons">
                <div></div> <!-- Espace vide √† gauche -->
                <button class="btn btn-next" onclick="nextStep(2)">
                    Suivant <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- √âtape 2 : S√©lection de l'unit√© -->
        <div class="section" id="section2">
            <h2 class="section-title">S√©lectionnez une Unit√© de Production</h2>
            <p class="section-subtitle" id="selectedFiliereText">
                <!-- Texte dynamique -->
            </p>
            <div class="unite-list" id="uniteList">
                <!-- G√©n√©r√© par JavaScript -->
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-prev" onclick="prevStep(1)">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
                <button class="btn btn-next" onclick="nextStep(3)">
                    Suivant <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- √âtape 3 : Choix de la localisation C√îTE D'IVOIRE -->
        <div class="section" id="section3">
            <h2 class="section-title">S√©lectionnez votre Localisation en C√¥te d'Ivoire</h2>
            <p class="section-subtitle">
                Choisissez une r√©gion naturelle ou une ville sp√©cifique pour l'implantation de votre unit√© de production.
            </p>
            
            <!-- R√©gions naturelles de C√¥te d'Ivoire -->
            <div class="location-container">
                <h3 class="location-title"><i class="fas fa-mountain"></i> R√©gions Naturelles de C√¥te d'Ivoire</h3>
                <div class="location-grid" id="regionsGrid">
                    <!-- G√©n√©r√© par JavaScript -->
                </div>
            </div>
            
            <!-- Villes principales de C√¥te d'Ivoire -->
            <div class="location-container" style="margin-top: 30px;">
                <h3 class="location-title"><i class="fas fa-city"></i> Villes Principales</h3>
                <div class="location-grid" id="citiesGrid">
                    <!-- G√©n√©r√© par JavaScript -->
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-prev" onclick="prevStep(2)">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
                <button class="btn btn-next" onclick="nextStep(4)">
                    Suivant <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- √âtape 4 : Montant d'investissement -->
        <div class="section" id="section4">
            <h2 class="section-title">Montant d'Investissement</h2>
            <p class="section-subtitle">
                D√©finissez votre budget d'investissement (CAPEX) pour cette unit√© de production.
            </p>
            <div class="form-grid">
                <div class="form-group">
                    <h3 class="form-title"><i class="fas fa-chart-line"></i> Budget CAPEX</h3>
                    <p style="color: #b8c1ec; margin-bottom: 20px;">
                        CAPEX minimum recommand√© : <span id="minCapex" style="color: #28a745; font-weight: bold;">80k $</span>
                    </p>
                    <input type="range" class="investment-range" id="capexRange" min="50" max="1000" step="10" value="200">
                    <input type="number" class="investment-input" id="capexInput" value="200" min="50" max="1000">
                    <p style="color: #b8c1ec; margin-top: 15px; font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i> Le CAPEX comprend les √©quipements, machines et installations.
                    </p>
                </div>
                
                <div class="form-group">
                    <h3 class="form-title"><i class="fas fa-calculator"></i> Estimation OPEX</h3>
                    <p style="color: #b8c1ec; margin-bottom: 20px;">
                        Co√ªts op√©rationnels estim√©s (par an) :
                    </p>
                    <div style="background: rgba(255, 107, 107, 0.1); padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h4 style="color: #ff6b6b; margin-bottom: 10px;">OPEX Annuel Estim√©</h4>
                        <div style="font-size: 2rem; color: #ff6b6b; font-weight: bold;" id="opexEstimation">
                            -- k $
                        </div>
                        <p style="color: #b8c1ec; margin-top: 10px; font-size: 0.9rem;">
                            <i class="fas fa-info-circle"></i> Inclut mati√®res premi√®res, salaires, √©nergie, maintenance.
                        </p>
                    </div>
                </div>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-prev" onclick="prevStep(3)">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
                <button class="btn btn-next" onclick="nextStep(5)">
                    Suivant <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- √âtape 5 : R√©capitulatif -->
        <div class="section" id="section5">
            <h2 class="section-title">R√©capitulatif de votre S√©lection</h2>
            <p class="section-subtitle">
                V√©rifiez les informations ci-dessous avant de confirmer votre s√©lection.
            </p>
            
            <div class="recap-grid">
                <div class="recap-card">
                    <div class="recap-label">Fili√®re S√©lectionn√©e</div>
                    <div class="recap-value" id="recapFiliere">--</div>
                </div>
                <div class="recap-card">
                    <div class="recap-label">Unit√© de Production</div>
                    <div class="recap-value" id="recapUnite">--</div>
                </div>
                <div class="recap-card">
                    <div class="recap-label">Localisation</div>
                    <div class="recap-value" id="recapLocation">--</div>
                </div>
                <div class="recap-card">
                    <div class="recap-label">Type de Localisation</div>
                    <div class="recap-value" id="recapLocationType">--</div>
                </div>
            </div>
            
            <div class="recap-grid" style="margin-top: 40px;">
                <div class="recap-card">
                    <div class="recap-label">Investissement CAPEX</div>
                    <div class="recap-value recap-capex" id="recapCapex">-- k $</div>
                </div>
                <div class="recap-card">
                    <div class="recap-label">OPEX Annuel Estim√©</div>
                    <div class="recap-value recap-opex" id="recapOpex">-- k $</div>
                </div>
                <div class="recap-card">
                    <div class="recap-label">Surface Estim√©e</div>
                    <div class="recap-value" id="recapSurface">-- m¬≤</div>
                </div>
                <div class="recap-card">
                    <div class="recap-label">Personnel Estim√©</div>
                    <div class="recap-value" id="recapPersonnel">-- personnes</div>
                </div>
            </div>
            
            <!-- Boutons d'action -->
            <div class="action-buttons">
                <button class="btn btn-modify" onclick="modifyChoices()">
                    <i class="fas fa-redo-alt"></i> Modifier vos choix
                </button>
                
                <button class="btn btn-confirm" onclick="confirmSelection()">
                    <i class="fas fa-check-circle"></i> Confirmer la s√©lection et voir la fiche
                </button>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-prev" onclick="prevStep(4)">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
            </div>
        </div>
    </div>

    <!-- Footer P2I -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Plateforme Industrielle Ivoirienne</h3>
                    <p style="color: #b8c1ec; line-height: 1.7;">
                        <strong>Vision :</strong> Faire de la C√¥te d'Ivoire un hub industriel leader en Afrique de l'Ouest.<br>
                        <strong>Mission :</strong> De l'id√©e √† l'usine, nous accompagnons chaque √©tape de votre projet industriel.
                    </p>
                </div>
                <div class="footer-column">
                    <h3>Navigation</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Accueil</a></li>
                        <li><a href="filieres.html">Fili√®res Industrielles</a></li>
                        <li><a href="secteur-industriel.html">Secteur Industriel</a></li>
                        <li><a href="reseau.html">R√©seautage</a></li>
                        <li><a href="apropos.html">√Ä Propos</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Legal & Information</h3>
                    <ul class="footer-links">
                        <li><a href="#cgu">Conditions G√©n√©rales</a></li>
                        <li><a href="#confidentialite">Politique de Confidentialit√©</a></li>
                        <li><a href="#mentions">Mentions L√©gales</a></li>
                        <li>Immatriculation : RC Abidjan 2025-00123</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Plateforme Industrielle Ivoirienne (P2I). Tous droits r√©serv√©s.</p>
                <p style="margin-top: 10px; font-size: 0.8rem;">
                    Ce site est une d√©monstration. Les donn√©es sont simul√©es √† des fins d'illustration.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // ===== DONN√âES DES FILI√àRES P2I COTE D'IVOIRE =====
        const filieresData = [
            {
                id: "agro",
                name: "Agro-alimentaire & Boissons",
                icon: "üåæ",
                description: "Transformation industrielle des produits agricoles locaux",
                units: [
                    { id: "conserverie_legumes", name: "Conserverie de l√©gumes", minCapex: 90, description: "Transformation industrielle de l√©gumes locaux en conserves" },
                    { id: "biscuiterie", name: "Biscuiterie industrielle", minCapex: 120, description: "Biscuits √† base de farines locales enrichies, cacao et caf√©" },
                    { id: "boulangerie_industrielle", name: "Boulangerie industrielle", minCapex: 150, description: "Production industrielle de pains, croissants et viennoiseries" },
                    { id: "jus_boissons", name: "Production de jus et boissons", minCapex: 100, description: "Transformation de fruits locaux en jus et boissons" },
                    { id: "mini_laiterie", name: "Mini-laiterie", minCapex: 110, description: "Transformation du lait en produits laitiers" },
                    { id: "huiles_alimentaires", name: "Huiles alimentaires", minCapex: 130, description: "Production d'huiles v√©g√©tales locales" },
                    { id: "epices", name: "Transformation d'√©pices", minCapex: 70, description: "Transformation et conditionnement d'√©pices locales" },
                    { id: "aliments_betail", name: "Aliments pour b√©tail", minCapex: 95, description: "Production d'aliments compos√©s pour l'√©levage" }
                ]
            },
            {
                id: "chimie",
                name: "Chimie, Cosm√©tiques & D√©tergents",
                icon: "üß™",
                description: "Produits chimiques, hygi√®ne et solutions industrielles",
                units: [
                    { id: "detergents", name: "D√©tergents & produits m√©nagers", minCapex: 80, description: "Fabrication de d√©tergents et produits d'hygi√®ne" },
                    { id: "savonnerie", name: "Savonnerie industrielle", minCapex: 70, description: "Production de savons solides et liquides" },
                    { id: "cosmetiques", name: "Cosm√©tiques naturels", minCapex: 85, description: "Cosm√©tiques √† base de mati√®res premi√®res locales" },
                    { id: "peintures", name: "Peintures industrielles & BTP", minCapex: 140, description: "Peintures pour b√¢timent et industrie" },
                    { id: "adhesifs", name: "Adh√©sifs & colles", minCapex: 120, description: "Colles industrielles et adh√©sifs techniques" },
                    { id: "engrais", name: "Engrais & pesticides", minCapex: 180, description: "Intrants agricoles et m√©nagers" },
                    { id: "javel", name: "Eau de javel & d√©sinfectants", minCapex: 60, description: "Produits d√©sinfectants industriels" },
                    { id: "produits_industriels", name: "Produits chimiques industriels", minCapex: 150, description: "Produits chimiques √† usage industriel" }
                ]
            },
            {
                id: "textile",
                name: "Textile, Habillement & Cuir",
                icon: "üßµ",
                description: "Textile, cuir et habillement pour march√©s locaux et r√©gionaux",
                units: [
                    { id: "confection", name: "Confection de v√™tements", minCapex: 60, description: "V√™tements pr√™ts-√†-porter et tenues modernes" },
                    { id: "tissage", name: "Tissage & pagnes", minCapex: 100, description: "Production de tissus et pagnes locaux" },
                    { id: "maroquinerie", name: "Maroquinerie cuir", minCapex: 75, description: "Articles en cuir pour march√©s locaux et export" },
                    { id: "teinture", name: "Teinture textile", minCapex: 40, description: "Teinture textile industrielle et artisanale" },
                    { id: "broderie", name: "Broderie industrielle", minCapex: 55, description: "Broderie automatis√©e sur textiles" },
                    { id: "chaussures", name: "Chaussures & sandales", minCapex: 120, description: "Production de chaussures et sandales" },
                    { id: "uniformes", name: "Confection d'uniformes", minCapex: 70, description: "Uniformes scolaires et professionnels" },
                    { id: "linge", name: "Linge de maison", minCapex: 90, description: "Linge domestique et h√¥telier" }
                ]
            },
            {
                id: "metal",
                name: "M√©tallurgie & M√©canique",
                icon: "‚öôÔ∏è",
                description: "Travail des m√©taux et m√©canique industrielle",
                units: [
                    { id: "serrurerie", name: "Serrurerie m√©tallique", minCapex: 55, description: "Portes, fen√™tres et grilles m√©talliques" },
                    { id: "outillage", name: "Outillage agricole", minCapex: 85, description: "Outils et √©quipements agricoles" },
                    { id: "recyclage_metaux", name: "Recyclage de m√©taux", minCapex: 110, description: "Transformation de m√©taux ferreux et non ferreux" },
                    { id: "chaudronnerie", name: "Chaudronnerie industrielle", minCapex: 95, description: "Cuves, silos et √©quipements m√©talliques" },
                    { id: "mecanosoudure", name: "M√©canosoudure", minCapex: 65, description: "Soudure industrielle et fabrication sur mesure" },
                    { id: "structures", name: "Structures m√©talliques", minCapex: 100, description: "Charpentes et pyl√¥nes m√©talliques" },
                    { id: "pieces", name: "Pi√®ces m√©caniques", minCapex: 140, description: "Usinage de pi√®ces m√©caniques" },
                    { id: "quincaillerie", name: "Quincaillerie m√©tallique", minCapex: 75, description: "Vis, boulons et pi√®ces de fixation" }
                ]
            },
            {
                id: "plastique",
                name: "Plastique & Caoutchouc",
                icon: "üß¥",
                description: "Transformation plastique et caoutchouc industriel",
                units: [
                    { id: "sacs", name: "Production de sacs plastiques", minCapex: 75, description: "Sacs biod√©gradables et r√©utilisables" },
                    { id: "bouteilles_pet", name: "Soufflage de bouteilles PET", minCapex: 110, description: "Bouteilles pour eau et boissons" },
                    { id: "tuyaux_pvc", name: "Tuyaux PVC", minCapex: 130, description: "Tuyaux pour irrigation et BTP" },
                    { id: "emballages", name: "Emballages plastiques", minCapex: 85, description: "Films et emballages alimentaires" },
                    { id: "profil√©s", name: "Profil√©s plastiques", minCapex: 120, description: "Profil√©s pour construction et industrie" },
                    { id: "jouets", name: "Jouets en plastique", minCapex: 70, description: "Jouets √©ducatifs et articles enfants" },
                    { id: "joints", name: "Joints en caoutchouc", minCapex: 60, description: "Joints d'√©tanch√©it√© et pi√®ces techniques" },
                    { id: "granules", name: "Granul√©s plastiques recycl√©s", minCapex: 150, description: "Granul√©s pour industrie, sols sportifs et collectivit√©s" }
                ]
            },
            {
                id: "electronique",
                name: "√âlectronique & √âlectricit√©",
                icon: "üí°",
                description: "√âquipements √©lectriques et √©lectroniques",
                units: [
                    { id: "cables", name: "C√¢bles √©lectriques", minCapex: 125, description: "C√¢bles pour b√¢timent et industrie" },
                    { id: "panneaux_solaires", name: "Assemblage de panneaux solaires", minCapex: 180, description: "Kits photovolta√Øques pour √©lectrification" },
                    { id: "appareils", name: "Assemblage d'appareils √©lectroniques", minCapex: 95, description: "Radios, chargeurs et petits √©quipements" },
                    { id: "led", name: "Lampes LED", minCapex: 65, description: "Lampes LED basse consommation" },
                    { id: "tableaux", name: "Tableaux √©lectriques", minCapex: 85, description: "Tableaux de distribution √©lectrique" },
                    { id: "onduleurs", name: "Onduleurs solaires", minCapex: 110, description: "Onduleurs et r√©gulateurs de tension" },
                    { id: "compteurs", name: "Compteurs √©lectriques", minCapex: 150, description: "Compteurs d'√©nergie √©lectrique" },
                    { id: "batteries", name: "Batteries", minCapex: 200, description: "Batteries automobiles et stationnaires" }
                ]
            },
            {
                id: "btp",
                name: "BTP & Mat√©riaux de Construction",
                icon: "üèóÔ∏è",
                description: "Mat√©riaux et solutions pour le b√¢timent",
                units: [
                    { id: "cimenterie", name: "Mini-cimenterie", minCapex: 600, description: "Production locale de ciment" },
                    { id: "briques", name: "Briques & BTC", minCapex: 55, description: "Briques en terre cuite et BTC" },
                    { id: "prefab", name: "√âl√©ments pr√©fabriqu√©s b√©ton", minCapex: 110, description: "Poutrelles et √©l√©ments b√©ton" },
                    { id: "tuiles", name: "Tuiles", minCapex: 85, description: "Tuiles b√©ton ou c√©ramique" },
                    { id: "agglos", name: "Agglos & parpaings", minCapex: 75, description: "Blocs de b√©ton" },
                    { id: "peintures_btp", name: "Peintures BTP", minCapex: 95, description: "Peintures pour b√¢timent" },
                    { id: "centrale_beton", name: "Centrale √† b√©ton", minCapex: 150, description: "B√©ton pr√™t √† l'emploi" },
                    { id: "menuiserie", name: "Menuiserie aluminium & PVC", minCapex: 150, description: "Portes et fen√™tres aluminium/PVC" }
                ]
            },
            {
                id: "medical",
                name: "Petits Mat√©riels M√©dicaux",
                icon: "üè•",
                description: "√âquipements m√©dicaux et consommables",
                units: [
                    { id: "masques", name: "Masques m√©dicaux", minCapex: 35, description: "Masques chirurgicaux et de protection" },
                    { id: "pansements", name: "Bandages & pansements", minCapex: 45, description: "Pansements et compresses" },
                    { id: "mobilier", name: "Mobilier m√©dical", minCapex: 70, description: "Lits et √©quipements hospitaliers" },
                    { id: "fauteuils", name: "Fauteuils roulants", minCapex: 85, description: "Fauteuils roulants et aides √† la mobilit√©" },
                    { id: "instruments", name: "Instruments m√©dicaux de base", minCapex: 120, description: "Instruments non invasifs" },
                    { id: "bequilles", name: "B√©quilles & cannes", minCapex: 55, description: "Aides √† la marche" },
                    { id: "antiseptiques", name: "Solutions antiseptiques", minCapex: 65, description: "Solutions hydroalcooliques" },
                    { id: "kits", name: "Kits m√©dicaux", minCapex: 50, description: "Trousse de premiers secours" }
                ]
            },
            {
                id: "assemblage",
                name: "Assemblage & Montage",
                icon: "üõ†Ô∏è",
                description: "Assemblage industriel CKD / SKD avec SAV",
                units: [
                    { id: "smartphones", name: "Assemblage de smartphones & tablettes", minCapex: 250, description: "Assemblage CKD avec SAV structur√©" },
                    { id: "ordinateurs", name: "Assemblage d'ordinateurs", minCapex: 150, description: "PC pour √©coles et administrations" },
                    { id: "electromenager", name: "√âlectrom√©nager", minCapex: 220, description: "R√©frig√©rateurs et cuisini√®res" },
                    { id: "climatiseurs", name: "Climatiseurs", minCapex: 220, description: "Climatiseurs split et mobiles" },
                    { id: "motos", name: "Motos & scooters", minCapex: 280, description: "Mobilit√© urbaine et rurale" },
                    { id: "velos", name: "Bicyclettes", minCapex: 100, description: "V√©los urbains et ruraux" },
                    { id: "meubles", name: "Meubles", minCapex: 70, description: "Meubles en kit" },
                    { id: "equipements", name: "√âquipements divers", minCapex: 180, description: "Assemblage industriel diversifi√©" }
                ]
            },
            {
                id: "recyclage",
                name: "Recyclage & Valorisation",
                icon: "‚ôªÔ∏è",
                description: "√âconomie circulaire et valorisation des d√©chets",
                units: [
                    { id: "plastique", name: "Recyclage du plastique", minCapex: 110, description: "Granul√©s plastiques recycl√©s" },
                    { id: "papier", name: "Recyclage du papier", minCapex: 120, description: "P√¢te et produits papier" },
                    { id: "metaux", name: "Recyclage des m√©taux", minCapex: 130, description: "M√©taux recycl√©s pour industrie" },
                    { id: "compost", name: "Production de compost", minCapex: 55, description: "Valorisation des d√©chets organiques" },
                    { id: "verre", name: "Recyclage du verre", minCapex: 150, description: "Granulats de verre recycl√©" },
                    { id: "pneus", name: "Recyclage de pneus", minCapex: 150, description: "Granulats de caoutchouc" },
                    { id: "huiles", name: "Recyclage d'huiles usag√©es", minCapex: 85, description: "R√©g√©n√©ration d'huiles" },
                    { id: "deee", name: "Recyclage DEEE", minCapex: 160, description: "D√©chets √©lectroniques" }
                ]
            },
            {
                id: "services",
                name: "Services Industriels",
                icon: "üìä",
                description: "Services techniques et organisationnels industriels",
                units: [
                    { id: "nettoyage", name: "Nettoyage industriel", minCapex: 40, description: "Nettoyage et d√©pollution industrielle" },
                    { id: "maintenance", name: "Maintenance industrielle", minCapex: 90, description: "Maintenance des √©quipements" },
                    { id: "logistique", name: "Logistique industrielle", minCapex: 120, description: "Entreposage et transport industriel" },
                    { id: "formation", name: "Centre de formation industrielle", minCapex: 70, description: "Formation aux m√©tiers industriels" },
                    { id: "qualite", name: "Contr√¥le qualit√©", minCapex: 60, description: "Essais, tests et audits" },
                    { id: "etudes", name: "Bureau d'√©tudes", minCapex: 55, description: "Ing√©nierie et √©tudes techniques" },
                    { id: "securite", name: "S√©curit√© industrielle", minCapex: 50, description: "Audit HSE et pr√©vention" },
                    { id: "energie", name: "Services √©nerg√©tiques", minCapex: 100, description: "Audit et optimisation √©nerg√©tique" }
                ]
            },
            {
                id: "energie",
                name: "√ânergie, Eau & Environnement",
                icon: "‚ö°",
                description: "Solutions √©nerg√©tiques et environnementales",
                units: [
                    { id: "poteaux", name: "Poteaux √©lectriques en b√©ton", minCapex: 150, description: "Poteaux pour r√©seaux √©lectriques" },
                    { id: "compteurs_eau", name: "Compteurs d'eau", minCapex: 120, description: "Compteurs pour r√©seaux urbains" },
                    { id: "kits_solaires", name: "Kits solaires domestiques", minCapex: 100, description: "Syst√®mes solaires autonomes" },
                    { id: "lampadaires", name: "Lampadaires solaires", minCapex: 130, description: "√âclairage public solaire" },
                    { id: "forage", name: "Forage & hydraulique", minCapex: 160, description: "√âquipements hydrauliques" },
                    { id: "eau", name: "Traitement de l'eau", minCapex: 110, description: "Stations de traitement d'eau" },
                    { id: "maintenance_energie", name: "Maintenance √©nerg√©tique", minCapex: 80, description: "Maintenance des installations" },
                    { id: "audit", name: "Audit √©nerg√©tique & environnemental", minCapex: 60, description: "√âtudes d'impact et diagnostics" }
                ]
            }
        ];

        // ===== DONN√âES DE LOCALISATION C√îTE D'IVOIRE =====
        const coteIvoireLocations = {
            regions: [
                { id: "sud_forestier", name: "Sud Forestier", type: "R√©gion Naturelle", description: "Zone foresti√®re avec for√™ts denses et production de cacao" },
                { id: "centre_savanicole", name: "Centre Savanicole", type: "R√©gion Naturelle", description: "Zone de savane avec agriculture diversifi√©e" },
                { id: "nord_soudanais", name: "Nord Soudanais", type: "R√©gion Naturelle", description: "Zone soudanaise avec √©levage et coton" },
                { id: "region_lac", name: "R√©gion du Lac", type: "R√©gion Naturelle", description: "Zone lacustre avec p√™che et activit√©s connexes" },
                { id: "littoral", name: "Littoral", type: "R√©gion Naturelle", description: "Zone c√¥ti√®re avec ports et activit√©s maritimes" },
                { id: "ouest_montagneux", name: "Ouest Montagneux", type: "R√©gion Naturelle", description: "Zone montagneuse avec mines et agriculture" }
            ],
            cities: [
                { id: "abidjan", name: "Abidjan", type: "Ville", region: "Littoral", description: "Capitale √©conomique, principal centre industriel" },
                { id: "bouake", name: "Bouak√©", type: "Ville", region: "Centre Savanicole", description: "Deuxi√®me ville du pays, carrefour commercial" },
                { id: "daloa", name: "Daloa", type: "Ville", region: "Sud Forestier", description: "Centre cacaoyer et commercial important" },
                { id: "korhogo", name: "Korhogo", type: "Ville", region: "Nord Soudanais", description: "Capitale du Nord, centre culturel et commercial" },
                { id: "yamoussoukro", name: "Yamoussoukro", type: "Ville", region: "Centre Savanicole", description: "Capitale politique" },
                { id: "sanpedro", name: "San-P√©dro", type: "Ville", region: "Littoral", description: "Deuxi√®me port du pays, centre industriel" },
                { id: "gagnoa", name: "Gagnoa", type: "Ville", region: "Sud Forestier", description: "Centre agricole et commercial" },
                { id: "man", name: "Man", type: "Ville", region: "Ouest Montagneux", description: "Capitale de la r√©gion des Montagnes" },
                { id: "divo", name: "Divo", type: "Ville", region: "Sud Forestier", description: "Important centre de production de caoutchouc" },
                { id: "abengourou", name: "Abengourou", type: "Ville", region: "Sud Forestier", description: "Centre de production de caf√© et cacao" },
                { id: "agboville", name: "Agboville", type: "Ville", region: "Sud Forestier", description: "Centre industriel et commercial" },
                { id: "dabou", name: "Dabou", type: "Ville", region: "Littoral", description: "Port et centre de p√™che important" },
                { id: "grandbassam", name: "Grand-Bassam", type: "Ville", region: "Littoral", description: "Ancienne capitale, site historique" },
                { id: "bondoukou", name: "Bondoukou", type: "Ville", region: "Nord Soudanais", description: "Ville historique et commerciale" },
                { id: "odienne", name: "Odienn√©", type: "Ville", region: "Nord Soudanais", description: "Centre aurif√®re et commercial" },
                { id: "seguela", name: "S√©gu√©la", type: "Ville", region: "Nord Soudanais", description: "Centre de production de coton" },
                { id: "touba", name: "Touba", type: "Ville", region: "Nord Soudanais", description: "Ville commerciale et agricole" },
                { id: "ferkessedougou", name: "Ferkess√©dougou", type: "Ville", region: "Nord Soudanais", description: "Centre de commerce transfrontalier" },
                { id: "bingerville", name: "Bingerville", type: "Ville", region: "Littoral", description: "Ancienne capitale, ville administrative" },
                { id: "anyama", name: "Anyama", type: "Ville", region: "Littoral", description: "Banlieue industrielle d'Abidjan" }
            ]
        };

        // Variables globales
        let selectedFiliere = null;
        let selectedUnite = null;
        let selectedLocation = null;
        let selectedLocationType = null;
        let selectedCapex = 200; // Valeur par d√©faut

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            chargerFilieres();
            chargerLocations();
            setupEventListeners();
        });

        // Charger les fili√®res
        function chargerFilieres() {
            const filiereGrid = document.getElementById('filiereGrid');
            filiereGrid.innerHTML = '';
            
            filieresData.forEach(filiere => {
                const card = document.createElement('div');
                card.className = 'filiere-card';
                card.dataset.id = filiere.id;
                card.onclick = () => selectFiliere(filiere, card);
                
                card.innerHTML = `
                    <div class="filiere-icon">${filiere.icon}</div>
                    <h3 class="filiere-title">${filiere.name}</h3>
                    <p class="filiere-desc">${filiere.description}</p>
                    <div class="filiere-count">
                        <i class="fas fa-industry"></i> ${filiere.units.length} unit√©s disponibles
                    </div>
                `;
                
                filiereGrid.appendChild(card);
            });
        }

        // Charger les localisations de C√¥te d'Ivoire
        function chargerLocations() {
            const regionsGrid = document.getElementById('regionsGrid');
            const citiesGrid = document.getElementById('citiesGrid');
            
            regionsGrid.innerHTML = '';
            citiesGrid.innerHTML = '';
            
            // Charger les r√©gions
            coteIvoireLocations.regions.forEach(region => {
                const card = document.createElement('div');
                card.className = 'location-card';
                card.dataset.id = region.id;
                card.dataset.type = 'region';
                card.onclick = () => selectLocation(region, card);
                
                card.innerHTML = `
                    <div class="location-name">${region.name}</div>
                    <div class="location-type region">${region.type}</div>
                    <p style="font-size: 0.85rem; margin-top: 8px; color: #b8c1ec;">${region.description}</p>
                `;
                
                regionsGrid.appendChild(card);
            });
            
            // Charger les villes
            coteIvoireLocations.cities.forEach(city => {
                const card = document.createElement('div');
                card.className = 'location-card';
                card.dataset.id = city.id;
                card.dataset.type = 'city';
                card.onclick = () => selectLocation(city, card);
                
                card.innerHTML = `
                    <div class="location-name">${city.name}</div>
                    <div class="location-type city">${city.type}</div>
                    <div style="font-size: 0.8rem; margin-top: 5px; color: #4cc9f0;">
                        <i class="fas fa-map-pin"></i> ${city.region}
                    </div>
                    <p style="font-size: 0.85rem; margin-top: 8px; color: #b8c1ec;">${city.description}</p>
                `;
                
                citiesGrid.appendChild(card);
            });
        }

        // S√©lectionner une fili√®re
        function selectFiliere(filiere, element) {
            // D√©s√©lectionner toutes les fili√®res
            document.querySelectorAll('.filiere-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // S√©lectionner la fili√®re choisie
            element.classList.add('selected');
            selectedFiliere = filiere;
            
            // Mettre √† jour le texte de l'√©tape 2
            document.getElementById('selectedFiliereText').innerHTML = `
                Fili√®re s√©lectionn√©e : <strong style="color: #4cc9f0;">${filiere.name}</strong><br>
                ${filiere.description}
            `;
            
            // Charger les unit√©s de cette fili√®re
            chargerUnites(filiere);
        }

        // Charger les unit√©s d'une fili√®re
        function chargerUnites(filiere) {
            const uniteList = document.getElementById('uniteList');
            uniteList.innerHTML = '';
            
            filiere.units.forEach(unite => {
                const card = document.createElement('div');
                card.className = 'unite-card';
                card.style.cursor = "pointer";
                card.onclick = (e) => {
                    e.stopPropagation();
                    selectUnite(unite, card);
                };
                
                card.innerHTML = `
                    <div class="capex-badge">CAPEX minimum: ${unite.minCapex}k $</div>
                    <h4 class="unite-name">${unite.name}</h4>
                    <p class="unite-desc">${unite.description}</p>
                `;
                
                uniteList.appendChild(card);
            });
        }

        // S√©lectionner une unit√©
        function selectUnite(unite, element) {
            // D√©s√©lectionner toutes les unit√©s
            document.querySelectorAll('.unite-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // S√©lectionner l'unit√© choisie
            element.classList.add('selected');
            selectedUnite = unite;
            
            // Mettre √† jour le CAPEX minimum dans l'√©tape 4
            document.getElementById('minCapex').textContent = `${unite.minCapex}k $`;
            document.getElementById('capexRange').min = unite.minCapex;
            document.getElementById('capexInput').min = unite.minCapex;
            document.getElementById('capexRange').value = Math.max(unite.minCapex, selectedCapex);
            document.getElementById('capexInput').value = Math.max(unite.minCapex, selectedCapex);
            
            // Mettre √† jour l'estimation OPEX
            updateOpexEstimation();
        }

        // S√©lectionner une localisation
        function selectLocation(location, element) {
            // D√©s√©lectionner toutes les localisations
            document.querySelectorAll('.location-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // S√©lectionner la localisation choisie
            element.classList.add('selected');
            selectedLocation = location.name;
            selectedLocationType = location.type;
            
            // Mettre √† jour le r√©capitulatif
            updateRecap();
        }

        // Configurer les √©v√©nements
        function setupEventListeners() {
            // Slider CAPEX
            const capexRange = document.getElementById('capexRange');
            const capexInput = document.getElementById('capexInput');
            
            capexRange.addEventListener('input', function() {
                capexInput.value = this.value;
                selectedCapex = parseInt(this.value);
                updateOpexEstimation();
                updateRecap();
            });
            
            capexInput.addEventListener('input', function() {
                const minCapex = selectedUnite ? selectedUnite.minCapex : 50;
                let value = parseInt(this.value) || minCapex;
                value = Math.max(minCapex, Math.min(1000, value));
                
                this.value = value;
                capexRange.value = value;
                selectedCapex = value;
                updateOpexEstimation();
                updateRecap();
            });
        }

        // Mettre √† jour l'estimation OPEX
        function updateOpexEstimation() {
            if (!selectedUnite) return;
            
            // OPEX estim√© = 40-60% du CAPEX par an
            const opexRatio = 0.5; // 50%
            const opexEstime = Math.round(selectedCapex * opexRatio);
            
            document.getElementById('opexEstimation').textContent = `${opexEstime}k $`;
        }

        // Mettre √† jour le r√©capitulatif
        function updateRecap() {
            if (selectedFiliere) {
                document.getElementById('recapFiliere').textContent = selectedFiliere.name;
            }
            
            if (selectedUnite) {
                document.getElementById('recapUnite').textContent = selectedUnite.name;
            }
            
            if (selectedLocation) {
                document.getElementById('recapLocation').textContent = selectedLocation;
            }
            
            if (selectedLocationType) {
                document.getElementById('recapLocationType').textContent = selectedLocationType;
            }
            
            // CAPEX et OPEX
            document.getElementById('recapCapex').textContent = `${selectedCapex}k $`;
            
            const opexEstime = Math.round(selectedCapex * 0.5);
            document.getElementById('recapOpex').textContent = `${opexEstime}k $`;
            
            // Surface et personnel estim√©s
            const surface = Math.round(selectedCapex * 10 + 100);
            const personnel = Math.max(3, Math.round(selectedCapex / 20));
            
            document.getElementById('recapSurface').textContent = `${surface} m¬≤`;
            document.getElementById('recapPersonnel').textContent = `${personnel} personnes`;
        }

        // Navigation entre les √©tapes
        function nextStep(step) {
            // Validation avant de passer √† l'√©tape suivante
            if (step === 2 && !selectedFiliere) {
                alert("Veuillez s√©lectionner une fili√®re avant de continuer.");
                return;
            }
            
            if (step === 3 && !selectedUnite) {
                alert("Veuillez s√©lectionner une unit√© de production avant de continuer.");
                return;
            }
            
            if (step === 5) {
                if (!selectedLocation) {
                    alert("Veuillez s√©lectionner une localisation avant de continuer.");
                    return;
                }
                updateRecap();
            }
            
            // Cacher toutes les sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Afficher la section demand√©e
            document.getElementById(`section${step}`).classList.add('active');
            
            // Mettre √† jour les indicateurs d'√©tape
            updateStepIndicators(step);
        }

        function prevStep(step) {
            // Cacher toutes les sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Afficher la section demand√©e
            document.getElementById(`section${step}`).classList.add('active');
            
            // Mettre √† jour les indicateurs d'√©tape
            updateStepIndicators(step);
        }

        function updateStepIndicators(currentStep) {
            // R√©initialiser tous les indicateurs
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                
                const stepNumber = index + 1;
                if (stepNumber < currentStep) {
                    step.classList.add('completed');
                } else if (stepNumber === currentStep) {
                    step.classList.add('active');
                }
            });
        }

        // Fonction pour modifier les choix - Retour au d√©but
        function modifyChoices() {
            // R√©initialiser toutes les s√©lections
            selectedFiliere = null;
            selectedUnite = null;
            selectedLocation = null;
            selectedLocationType = null;
            selectedCapex = 200;
            
            // D√©s√©lectionner visuellement tous les √©l√©ments
            document.querySelectorAll('.filiere-card, .unite-card, .location-card').forEach(element => {
                element.classList.remove('selected');
            });
            
            // R√©initialiser les valeurs d'entr√©e
            document.getElementById('capexRange').value = 200;
            document.getElementById('capexInput').value = 200;
            
            // Retourner √† la premi√®re √©tape
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('section1').classList.add('active');
            
            // R√©initialiser les indicateurs d'√©tape
            updateStepIndicators(1);
            
            // R√©initialiser le texte de l'√©tape 2
            document.getElementById('selectedFiliereText').innerHTML = 
                "Fili√®re s√©lectionn√©e : <strong style='color: #4cc9f0;'>--</strong><br>";
            
            // R√©initialiser le r√©capitulatif
            document.getElementById('recapFiliere').textContent = "--";
            document.getElementById('recapUnite').textContent = "--";
            document.getElementById('recapLocation').textContent = "--";
            document.getElementById('recapLocationType').textContent = "--";
            document.getElementById('recapCapex').textContent = "-- k $";
            document.getElementById('recapOpex').textContent = "-- k $";
            document.getElementById('recapSurface').textContent = "-- m¬≤";
            document.getElementById('recapPersonnel').textContent = "-- personnes";
            
            // R√©initialiser l'estimation OPEX
            document.getElementById('opexEstimation').textContent = "-- k $";
            document.getElementById('minCapex').textContent = "80k $";
            
            // Vider la grille des unit√©s
            document.getElementById('uniteList').innerHTML = "";
            
        console.log("Recherche r√©initialis√©e. Vous pouvez recommencer.");
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // CONFIGURATION MISE √Ä JOUR (Cl√© de l'image IMG_1143)
        const SUPABASE_URL = 'https://cfbbpmxdtiuicaitssjp.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmYmJwbXhkdGl1aWNhaXRzc2pwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg4MzQ5MjUsImV4cCI6MjA4NDQxMDkyNX0._wukYnxJ27JJgW_YTU_m88YKNBVzAQFpMjBP7t8zT18'; // <-- TA NOUVELLE CL√â ICI
        
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function confirmSelection() {
            if (!selectedFiliere || !selectedUnite) {
                alert("Veuillez s√©lectionner une fili√®re et une unit√©.");
                return;
            }

            const { data: { session }, error: sessionError } = await supabaseClient.auth.getSession();
            
            if (sessionError || !session) {
                alert("Votre session a expir√©. Redirection vers la connexion...");
                window.location.href = 'index.html';
                return;
            }

            // Enregistrement final corrig√©
            const { data, error } = await supabaseClient
                .from('simulations')
                .insert([
                    { 
                        users_id: session.user.id,
                        nom_simulation: selectedUnite.nom || "Nouveau Projet",
                        filiere_choisie: selectedFiliere, // C'est du texte, OK pour la colonne text
                        unite_id: parseInt(selectedUnite.id) || 1, // On force en NOMBRE entier
                        statut: 'En cours',
                        progression: 10 // C'est un nombre, OK pour int8
                    }
                ])
                .select();

            if (error) {
                alert("Erreur base de donn√©es : " + error.message);
            } else {
                console.log("Succ√®s !");
                window.location.href = `fiche-production.html?id=${data[0].id}`;
            }
        }
async function confirmerSelection() {
    const { data: { user } } = await supabaseClient.auth.getUser();

    const simulationData = {
        unite_id: selectedUnite.id,
        localisation: selectedLocation,
        investissement: selectedCapex,
        progression: 100,
        users_id: user ? user.id : null, // Changement ici : avec un "s"
        type_bp: "aucun"
    };

    try {
        const { data, error } = await supabaseClient
            .from('simulations')
            .insert([simulationData])
            .select();

        if (error) throw error;

        const newId = data[0].id;
        // On part vers la fiche avec l'ID de la simulation
        window.location.href = `fiche-production.html?id=${newId}`;

    } catch (err) {
        console.error("Erreur d'enregistrement :", err.message);
        alert("Erreur lors de l'enregistrement.");
    }
}
    </script>
</body>
</html>
